<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>New Grid</title>
<script type="text/javascript" src='../../../jslib/jquery.js'></script>
</head>
<body>
	<h1>[table 800px][col pixel]</h1>
	<button type="button" id="origin">origin</button><button type="button" id="mix">mix</button>
	<div class="visualContainer">
		<table id="tbl1" border="1">
			<colgroup>
				<col id="col_id"             width="100" align="left"   style="text-align: right;"/>
				<col id="col_name"           width="100" align="center" />
				<col id="col_country"        width="120" align="center" />
				<col id="col_airport"        width="170" align="left"   />
				<col id="col_language"       width="150" align="left"   />
				<col id="col_countryIsoCode" width="200" align="left"   />
			</colgroup>
			<thead>
				<tr>
					<th>id</th>
					<th>name</th>
					<th>country</th>
					<th>airport</th>
					<th>language</th>
					<th>countryIsoCode</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>1</td><td>Washington, DC2</td><td>United States</td><td>IAD</td><td>Dutch</td><td>NL</td></tr><tr><td>2</td><td>Athens</td><td>Greece</td><td>ATH</td><td>Greek</td><td>GR</td></tr><tr><td>3</td><td>Auckland</td><td>New Zealand</td><td>AKL</td><td>English</td><td>NZ</td></tr><tr><td>4</td><td>Beirut</td><td>Lebanon</td><td>BEY</td><td>Arabic</td><td>LB</td></tr><tr><td>5</td><td>Bogota</td><td>Colombia</td><td>BOG</td><td>Spanish</td><td>CO</td></tr><tr><td>6</td><td>Bombay</td><td>India</td><td>BOM</td><td>Hindi</td><td>IN</td></tr><tr><td>7</td><td>Budapest</td><td>Hungary</td><td>BUD</td><td>Hungarian</td><td>HU</td></tr><tr><td>8</td><td>Buenos Aires</td><td>Argentina</td><td>BUE</td><td>Spanish</td><td>AR</td></tr><tr><td>9</td><td>Cairo</td><td>Egypt</td><td>CAI</td><td>Arabic</td><td>EG</td></tr><tr><td>10</td><td>Calcutta</td><td>India</td><td>CCU</td><td>Bengali</td><td>IN</td></tr><tr><td>11</td><td>Cape Town</td><td>South Africa</td><td>CPT</td><td>English</td><td>ZA</td></tr><tr><td>12</td><td>Caracas</td><td>Venezuela</td><td>CCS</td><td>Spanish</td><td>VE</td></tr><tr><td>13</td><td>Casablanca</td><td>Morocco</td><td>CAS</td><td>Arabic</td><td>MA</td></tr><tr><td>14</td><td>Copenhagen</td><td>Denmark</td><td>CPH</td><td>Danish</td><td>DK</td></tr><tr><td>15</td><td>Dublin</td><td>Ireland</td><td>DUB</td><td>English</td><td>IE</td></tr><tr><td>16</td><td>Geneva</td><td>Switzerland</td><td>GVA</td><td>French</td><td>CH</td></tr><tr><td>17</td><td>Hong Kong</td><td>China</td><td>HKG</td><td>Chinese</td><td>CN</td></tr><tr><td>18</td><td>Istanbul</td><td>Turkey</td><td>IST</td><td>Turkish</td><td>TR</td></tr><tr><td>19</td><td>Jakarta</td><td>Indonesia</td><td>JKT</td><td>Indonesian</td><td>ID</td></tr><tr><td>20</td><td>Kabul</td><td>Afghanistan</td><td>KBL</td><td>Pashto</td><td>AF</td></tr><tr><td>21</td><td>Karachi</td><td>Pakistan</td><td>KHI</td><td>Punjabi</td><td>PK</td></tr><tr><td>22</td><td>Lagos</td><td>Nigeria</td><td>LOS</td><td>English</td><td>NG</td></tr><tr><td>23</td><td>Lima</td><td>Peru</td><td>LIM</td><td>Spanish</td><td>PE</td></tr><tr><td>24</td><td>Lisbon</td><td>Portugal</td><td>LIS</td><td>Portuguese</td><td>PT</td></tr><tr><td>25</td><td>London</td><td>United Kingdom</td><td>LHR</td><td>English</td><td>GB</td></tr><tr><td>26</td><td>Madrid</td><td>Spain</td><td>MAD</td><td>Spanish</td><td>ES</td></tr><tr><td>27</td><td>Manila</td><td>Philippines</td><td>MNL</td><td>Tagalog</td><td>PH</td></tr><tr><td>28</td><td>Melbourne</td><td>Australia</td><td>MEL</td><td>English</td><td>AU</td></tr><tr><td>29</td><td>Mexico City</td><td>Mexico</td><td>MEX</td><td>Spanish</td><td>MX</td></tr><tr><td>30</td><td>Montreal</td><td>Canada</td><td>YUL</td><td>French</td><td>CA</td></tr><tr><td>31</td><td>Moscow</td><td>Russia</td><td>SVO</td><td>Russian</td><td>RU</td></tr><tr><td>32</td><td>Nairobi</td><td>Kenya</td><td>NBO</td><td>English</td><td>KE</td></tr><tr><td>33</td><td>Osaka</td><td>Japan</td><td>OSA</td><td>Japanese</td><td>JP</td></tr><tr><td>34</td><td>Oslo</td><td>Norway</td><td>OSL</td><td>Norwegian</td><td>NO</td></tr><tr><td>35</td><td>Paris</td><td>France</td><td>CDG</td><td>French</td><td>FR</td></tr><tr><td>36</td><td>Prague</td><td>Czech Republic</td><td>PRG</td><td>Czech</td><td>CZ</td></tr><tr><td>37</td><td>Reykjavik</td><td>Iceland</td><td>REY</td><td>Icelandic</td><td>IS</td></tr><tr><td>38</td><td>Rio de Janeiro</td><td>Brazil</td><td>GIG</td><td>Portuguese</td><td>BR</td></tr><tr><td>39</td><td>Rome</td><td>Italy</td><td>FCO</td><td>Italian</td><td>IT</td></tr><tr><td>40</td><td>Santiago</td><td>Chile</td><td>SCL</td><td>Spanish</td><td>CL</td></tr><tr><td>41</td><td>Sao Paulo</td><td>Brazil</td><td>GRU</td><td>Portuguese</td><td>BR</td></tr><tr><td>42</td><td>Seoul</td><td>Korea, Republic of</td><td>SEL</td><td>Korean</td><td>KR</td></tr><tr><td>43</td><td>Shanghai</td><td>China</td><td>SHA</td><td>Chinese</td><td>CN</td></tr><tr><td>44</td><td>Singapore</td><td>Singapore</td><td>SIN</td><td>Malay</td><td>SG</td></tr><tr><td>45</td><td>Stockholm</td><td>Sweden</td><td>ARN</td><td>Swedish</td><td>SE</td></tr><tr><td>46</td><td>Sydney</td><td>Australia</td><td>SYD</td><td>English</td><td>AU</td></tr><tr><td>47</td><td>San Jose</td><td>United States</td><td>SJC</td><td>English</td><td>US</td></tr><tr><td>48</td><td>Tehran</td><td>Iran</td><td>THR</td><td>Farsi</td><td>IR</td></tr><tr><td>49</td><td>Tokyo</td><td>Japan</td><td>NRT</td><td>Japanese</td><td>JP</td></tr><tr><td>50</td><td>Toronto</td><td>Canada</td><td>YYZ</td><td>English</td><td>CA</td></tr><tr><td>51</td><td>Warsaw</td><td>Poland</td><td>WAW</td><td>Polish</td><td>PL</td></tr><tr><td>52</td><td>Albany</td><td>United States</td><td>ALB</td><td>English</td><td>US</td></tr><tr><td>53</td><td>Albuquerque</td><td>United States</td><td>ABQ</td><td>English</td><td>US</td></tr><tr><td>54</td><td>Atlanta</td><td>United States</td><td>ATL</td><td>English</td><td>US</td></tr><tr><td>55</td><td>Boise</td><td>United States</td><td>BOI</td><td>English</td><td>US</td></tr><tr><td>56</td><td>Boston</td><td>United States</td><td>BOS</td><td>English</td><td>US</td></tr><tr><td>57</td><td>Charleston</td><td>United States</td><td>CHS</td><td>English</td><td>US</td></tr><tr><td>58</td><td>Chicago</td><td>United States</td><td>MDW</td><td>English</td><td>US</td></tr><tr><td>59</td><td>Cleveland</td><td>United States</td><td>CLE</td><td>English</td><td>US</td></tr><tr><td>60</td><td>Dallas</td><td>United States</td><td>DFW</td><td>English</td><td>US</td></tr><tr><td>61</td><td>Denver</td><td>United States</td><td>DEN</td><td>English</td><td>US</td></tr><tr><td>62</td><td>Des Moines</td><td>United States</td><td>DSM</td><td>English</td><td>US</td></tr><tr><td>63</td><td>Fairbanks</td><td>United States</td><td>FAI</td><td>English</td><td>US</td></tr><tr><td>64</td><td>Helena</td><td>United States</td><td>HLN</td><td>English</td><td>US</td></tr><tr><td>65</td><td>Honolulu</td><td>United States</td><td>HNL</td><td>English</td><td>US</td></tr><tr><td>66</td><td>Houston</td><td>United States</td><td>HOU</td><td>English</td><td>US</td></tr><tr><td>67</td><td>Juneau</td><td>United States</td><td>JNU</td><td>English</td><td>US</td></tr><tr><td>68</td><td>Kansas City</td><td>United States</td><td>MCI</td><td>English</td><td>US</td></tr><tr><td>69</td><td>Los Angeles</td><td>United States</td><td>LAX</td><td>English</td><td>US</td></tr><tr><td>70</td><td>Memphis</td><td>United States</td><td>MEM</td><td>English</td><td>US</td></tr><tr><td>71</td><td>Miami</td><td>United States</td><td>MIA</td><td>English</td><td>US</td></tr><tr><td>72</td><td>Milwaukee</td><td>United States</td><td>MKE</td><td>English</td><td>US</td></tr><tr><td>73</td><td>Minneapolis</td><td>United States</td><td>MSP</td><td>English</td><td>US</td></tr><tr><td>74</td><td>Nashville</td><td>United States</td><td>BNA</td><td>English</td><td>US</td></tr><tr><td>75</td><td>New Orleans</td><td>United States</td><td>MSY</td><td>English</td><td>US</td></tr><tr><td>76</td><td>New York</td><td>United States</td><td>JFK</td><td>English</td><td>US</td></tr><tr><td>77</td><td>Oklahoma City</td><td>United States</td><td>OKC</td><td>English</td><td>US</td></tr><tr><td>78</td><td>Philadelphia</td><td>United States</td><td>PHL</td><td>English</td><td>US</td></tr><tr><td>79</td><td>Phoenix</td><td>United States</td><td>PHX</td><td>English</td><td>US</td></tr><tr><td>80</td><td>Saint Louis</td><td>United States</td><td>STL</td><td>English</td><td>US</td></tr><tr><td>81</td><td>Salt Lake City</td><td>United States</td><td>SLC</td><td>English</td><td>US</td></tr><tr><td>82</td><td>San Antonio</td><td>United States</td><td>SAT</td><td>English</td><td>US</td></tr><tr><td>83</td><td>San Diego</td><td>United States</td><td>SAN</td><td>English</td><td>US</td></tr><tr><td>84</td><td>San Francisco</td><td>United States</td><td>SFO</td><td>English</td><td>US</td></tr><tr><td>85</td><td>San Juan</td><td>United States</td><td>SJU</td><td>Spanish</td><td>US</td></tr><tr><td>86</td><td>Seattle</td><td>United States</td><td>SEA</td><td>English</td><td>US</td></tr><tr><td>87</td><td>Washington, DC</td><td>United States</td><td>IAD</td><td>Dutch</td><td>NL</td></tr><tr><td>88</td><td>Amsterdam</td><td>Netherlands</td><td>AMS</td><td>Dutch</td><td>NL</td></tr>
			</tbody>
		</table>
	</div>
	
	
	
	
	
	<script type="text/javascript">
	(function(){
		var table = $("#tbl1");
		table.data("table",table.clone());
		
		$("#mix").bind("click",function(){
			mix(table,0);
		});
		
		$("#origin").bind("click",function(){
			var ori = table.data("table");
			ori.insertBefore(table);
			table.remove();
			table = ori;
			table.data("table",table.clone());
			
			$(".visualContainer").find(".mixNavigator").remove();
		});
		
		
		function mix(table,keyIndex){
			var thRow   = $("THEAD TR",table);
			var tdRows  = $("TBODY TR",table);
			var ths 	= thRow.find("TH");
			
			var mixNavigator = $('<div class="mixNavigator"><label class="label"></label><select class="select"></select><button type="button" class="button">change</button></div>');
			mixNavigator.insertBefore(table);
			
			var select = $(".select",mixNavigator);
			var label = $(".label",mixNavigator);
			label.text(ths.eq(keyIndex).text());
			
			var button =$(".button",mixNavigator);
			button.bind("click",function(){
				var option = select.find("option:selected");
				table.empty().append(option.data("tbody"));
			});
			
			tdRows.each(function(k){
				var tbody = $("<tbody></tbody>");
				var tr = $(this);
				var clonedTH = ths.clone();
				var tds = tr.find("TD");
				var option = $("<option>");
				
				tds.each(function(i){
					var targetTD = $(this);
					var newTR = $(document.createElement("TR"));
					newTR.append(clonedTH.eq(i),targetTD);
					tbody.append(newTR);
					
					if(i==keyIndex){
						option.val(targetTD.text());
						option.text(targetTD.text());
						select.append(option);
					}
				});
				
				option.data("tbody",tbody);
			});
			
			table.empty().append(select.find("option").eq(0).data("tbody"));
		}
		
		
		function origin(){
			
		}
	})();
	
	
	
	
	</script>
</body>
</html>